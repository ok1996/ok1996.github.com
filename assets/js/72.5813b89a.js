(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{650:function(s,a,n){"use strict";n.r(a);var e=n(7),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"启动skywalking启动台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动skywalking启动台"}},[s._v("#")]),s._v(" 启动SkyWalking启动台")]),s._v(" "),a("p",[s._v("README")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("## 修改es所需配置\nvi /etc/sysctl.conf\nvm.max_map_count=262144\nsysctl -p\n## 启动顺序\n1. elasticsearch 启动后关闭，赋权文件夹  [chmod -R 777 elasticsearch/*]  然后重启\n2. skywalking-oap-server\n3. skywalking-ui\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[s._v("#")]),s._v(" docker-compose")]),s._v(" "),a("p",[s._v("docker-compose.yml")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('version: \'3.3\'\nservices:\n  elasticsearch:\n    image: elasticsearch:6.8.6\n    container_name: elasticsearch\n    environment:\n      - "cluster.name=elasticsearch" #设置集群名称为elasticsearch\n      - "discovery.type=single-node" #以单一节点模式启动\n      - "ES_JAVA_OPTS=-Xms2g -Xmx2g"\n    volumes:\n      - ./elasticsearch/plugins:/usr/share/elasticsearch/plugins #插件文件挂载\n      - ./elasticsearch/data:/usr/share/elasticsearch/data #数据文件挂载\n    ports:\n      - 10800:9200\n  skywalking-oap-server:\n    image: apache/skywalking-oap-server:9.0.0\n    container_name: skywalking-oap-server\n    depends_on:\n      - elasticsearch\n    links:\n      - elasticsearch\n    restart: always\n    ports:\n      - 11800:11800\n      - 12800:12800\n    environment:\n      SW_STORAGE: elasticsearch  # 指定ES版本\n      SW_STORAGE_ES_CLUSTER_NODES: elasticsearch:9200\n      TZ: Asia/Shanghai\n#    volumes:\n#      - ./oap/conf/alarm-settings.yml:/skywalking/config/alarm-settings.yml\n  skywalking-ui:\n    image: apache/skywalking-ui:9.0.0\n    container_name: skywalking-ui\n    depends_on:\n      - skywalking-oap-server\n    links:\n      - skywalking-oap-server\n    restart: always\n    ports:\n      - 13800:8080\n    environment:\n      SW_OAP_ADDRESS: http://skywalking-oap-server:12800\n      TZ: Asia/Shanghai\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br")])]),a("h2",{attrs:{id:"微服务镜像集成代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微服务镜像集成代理"}},[s._v("#")]),s._v(" 微服务镜像集成代理")]),s._v(" "),a("h3",{attrs:{id:"readme"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#readme"}},[s._v("#")]),s._v(" README")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#SkyWalking 链路追踪版本\n##准备\n1. 把构建好的jar复制到files/jars目录下  \n2. 下载sentinel-dashboard-1.8.4.jar包复制到files/jars目录下  \n   改名sentinel-dashboard.jar\n   [https://github.com/alibaba/Sentinel/releases] \n3. 下载代理Java Agent[apache-skywalking-java-agent-8.10.0.tgz],放到files目录下,与Dockerfile同级  \n   改名apache-skywalking-java-agent.tgz\n   [http://skywalking.apache.org/downloads]    \n   [https://www.apache.org/dyn/closer.cgi/skywalking/java-agent/8.10.0/apache-skywalking-java-agent-8.10.0.tgz]    \n\n##启动\ndocker-compose up -d\n##只构建镜像\ndocker-compose build\n##区别\n1. 使用代理\n2. 启动前需指定收集器服务的地址   \n   -Dskywalking.collector.backend_service=192.168.213.201:11800\n\n## 使用本地IDEA启动\n配置vm参数：\n```\n-javaagent:E:\\Code\\package\\skywalking\\skywalking-agent\\skywalking-agent.jar\n-Dskywalking.agent.service_name=ok-auth\n-Dskywalking.collector.backend_service=192.168.213.201:11800\n```\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("h3",{attrs:{id:"dockerfile模版示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile模版示例"}},[s._v("#")]),s._v(" Dockerfile模版示例")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('FROM openjdk:8-jre\nRUN sh -c \'touch /app.jar\'\nCOPY jars/ok-system-pure-auth.jar app.jar\nCOPY apache-skywalking-java-agent.tgz  /apache-skywalking-java-agent.tgz\nRUN tar zxvf apache-skywalking-java-agent.tgz\nENTRYPOINT [ "sh", "-c", "java $JAVA_OPTS -javaagent:/skywalking-agent/skywalking-agent.jar -Dskywalking.agent.service_name=pure-auth -Djava.security.egd=file:/dev/./urandom -jar /app.jar" ]\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"docker-compose-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml"}},[s._v("#")]),s._v(" docker-compose.yml")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("version: '3'\n\nservices:\n  auth:\n    build:\n      context: ./files\n      dockerfile: AuthDockerfile\n    image: auth:1.5.0\n    container_name: auth\n    network_mode: bridge\n    ports:\n      - \"9200:9200\"\n    restart: always\n    environment:\n      - JAVA_OPTS=-Duser.timezone=GMT+08 -Dskywalking.collector.backend_service=192.168.213.201:11800\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);